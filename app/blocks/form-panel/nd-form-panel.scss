.nd-form-panel {
  $b: &;

  position: fixed;
  display: flex;
  width: 100vw;
  bottom: 0;
  left: 0;
  z-index: 23;
  min-height: 90px;
  box-sizing: border-box;

  @include screen('sm', max, 2) {
    transition: transform $ease-main, opacity $ease-main;
  }

  @include screen('xlg', max, 2) {
    min-height: pxtovw(90, 1660);
  }

  @include screen('lg', max, 2) {
    min-height: pxtovw(90, 1366);
  }

  @include screen('md', max, 2) {
    min-height: pxtovw(60, 960);
    background-color: $nd-color-basic-light;
  }

  @include screen('sm', max, 2) {
    min-height: pxtovw(60, 375);
  }

  .nd-content {
    display: flex;
  }

  // .is-keyboard-visible & {
  //   @include screen('sm', max, 2) {
  //     opacity: 0;
  //     transform: translate3d(0, 100%, 0);
  //   }
  // }

  &_hidden {
    visibility: hidden;
    pointer-events: none;
    opacity: 0;

    @include screen('sm', max, 2) {
      bottom: auto;
      top: 0;
      box-sizing: border-box;
      min-height: pxtovw(85, 375);
      padding-top: pxtovw(17, 375);
      padding-bottom: pxtovw(17, 375);
      box-shadow: 0 pxtovw(2, 375) pxtovw(2, 375) rgba(0, 0, 0, .04);
    }

    &.is-active {
      opacity: 1;
      pointer-events: auto;
      visibility: visible;
    }
  }

  &.is-stop {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
  }

  &.is-fixed {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100vw;
  }

  &_hidden.is-fixed {
    @include screen('sm', max, 2) {
      bottom: auto;
      top: 0;
    }
  }

  &__controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-sizing: border-box;
    width: 100%;
    height: 100%;
    background-color: $nd-color-basic-light;
    padding: 0 44px;

    @include screen('xlg', max, 2) {
      padding: 0 pxtovw(44, 1660);
    }

    @include screen('lg', max, 2) {
      padding: 0 pxtovw(30, 1366);
    }

    @include screen('md', max, 2) {
      padding: 0;
    }

    #{$b}_hidden & {
      @include screen('sm', max, 2) {
        align-items: flex-start;
      }
    }
  }

  &__reset {
    font-family: $font-stolzl;
    font-size: 16px;
    letter-spacing: -.015em;
    line-height: 1.2;

    @include screen('xlg', max, 2) {
      font-size: pxtovw(16, 1660);
    }

    @include screen('lg', max, 2) {
      font-size: pxtovw(16, 1366);
    }

    @include screen('md', max, 2) {
      font-size: pxtovw(16, 960);
    }

    @include screen('sm', max, 2) {
      font-size: pxtovw(16, 375);
    }

    .nd-link__icon {
      &:not(:last-child) {
        margin-right: 24px;

        @include screen('xlg', max, 2) {
          margin-right: pxtovw(24, 1660);
        }

        @include screen('lg', max, 2) {
          margin-right: pxtovw(24, 1366);
        }

        @include screen('md', max, 2) {
          margin-right: pxtovw(24, 960);
        }

        @include screen('sm', max, 2) {
          margin-right: pxtovw(15, 375);
        }
      }
    }

    #{$b}_hidden & {
      @include screen('sm', max, 2) {
        position: relative;
      }

      &::before {
        @include screen('sm', max, 2) {
          @include pseudo;

          top: 50%;
          left: 0;
          transform: translate3d(0, -50%, 0);
          width: pxtovw(21, 375);
          height: pxtovw(11, 375);
          background-image: url('../images/bg/arrow5.svg');
          background-repeat: no-repeat;
          background-size: contain;
          background-position: 50% 50%;
          z-index: 1;
        }
      }

      .nd-link {
        &__icon {
          @include screen('sm', max, 2) {
            opacity: 0;
            height: pxtovw(19, 375);
          }
        }

        &__text {
          @include screen('sm', max, 2) {
            display: none;
          }
        }
      }
    }
  }

  &__back {
    font-family: $font-stolzl;
    letter-spacing: -.015em;
    line-height: 1.2;

    @include rule(font-size, (xl: 16px, xlg: 16, lg: 16, md: 16, sm: 16));
  }

  &__button {
    min-width: 273px;

    @include screen('xlg', max, 2) {
      min-width: pxtovw(273, 1660);
    }

    @include screen('lg', max, 2) {
      min-width: pxtovw(273, 1366);
    }

    @include screen('md', max, 2) {
      min-width: pxtovw(273, 960);
    }

    @include screen('sm', max, 2) {
      min-width: pxtovw(163, 375);
    }

    &_mw303 {
      @include rule(min-width, (xl: 303px, xlg: 303, lg: 303, md: 303, sm: 180));
    }

    &_mw435 {
      @include rule(min-width, (xl: 435px, xlg: 435, lg: 435, md: 435, sm: 180));

      @include screen('sm', max, 2) {
        width: 100%;
      }
    }

    #{$b}_hidden & {
      @include rule(min-width, (sm: 100));
    }
  }

  &__savearea {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
  }

  &_wide {
    background-color: #fff;
    box-shadow: 0 3px 8px rgba(0, 0, 0, .25);

    @include rule(min-height, (xl: 70px, xlg: 70, lg: 70, md: 70, sm: 60));

    @include screen('xlg', max, 2) {
      box-shadow: 0 pxtovw(3, 1660) pxtovw(8, 1660) rgba(0, 0, 0, .25);
    }

    @include screen('lg', max, 2) {
      box-shadow: 0 pxtovw(3, 1366) pxtovw(8, 1366) rgba(0, 0, 0, .25);
    }

    @include screen('md', max, 2) {
      box-shadow: 0 pxtovw(3, 960) pxtovw(8, 960) rgba(0, 0, 0, .25);
    }

    @include screen('sm', max, 2) {
      box-shadow: 0 pxtovw(-1, 375) pxtovw(3, 375) rgba(0, 0, 0, .03);
    }

    &.nd-form-panel_hidden {
      @include rule(min-height, (sm: 85));

      @include screen('sm', max, 2) {
        box-shadow: 0 pxtovw(2, 375) pxtovw(2, 375) rgba(0, 0, 0, .04);
      }
    }

    #{$b} {
      &__controls {
        padding-left: 0;
        padding-right: 0;
        width: 100%;

        @include grid-column(1, 4);
        @include grid-row(1, 2);

        @include screen('md', max, 2) {
          @include grid-column(1, 2);
          @include grid-row(1, 3);
        }
      }

      &__savearea {
        @include grid-column(3, 4);
        @include grid-row(1, 2);

        @include screen('md', max, 2) {
          @include grid-column(1, 2);
          @include grid-row(1, 3);
        }
      }
    }
  }
}
